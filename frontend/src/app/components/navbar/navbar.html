@if (authStore.isAuthenticated()) {
  <!-- Desktop sidebar -->
  <nav class="sidebar" [class.collapsed]="!isOpen()">
    <div class="sidebar-header">
      <button class="toggle-btn" (click)="toggleSidebar()">
        {{ isOpen() ? 'âœ•' : 'â˜°' }}
      </button>
      @if (isOpen()) {
        <span class="brand">ğŸŒ¿ BitÃ¡cora</span>
      }
    </div>

    @if (isOpen()) {
      <ul class="nav-links">
        <li><a routerLink="/profile" routerLinkActive="active">ğŸ‘¤ Perfil</a></li>

        @if (authStore.isAdmin()) {
          <li><a routerLink="/users" routerLinkActive="active">ğŸ‘¥ Usuarios</a></li>
          <li><a routerLink="/create-user" routerLinkActive="active">â• Crear Usuario</a></li>
          <li><a routerLink="/search-users" routerLinkActive="active">ğŸ” Buscar Usuarios</a></li>
        }

        @if (authStore.isInvestigador()) {
          <li><a routerLink="/tasks" routerLinkActive="active">ğŸ“‹ BitÃ¡coras</a></li>
          <li><a routerLink="/add-task" routerLinkActive="active">â• Crear</a></li>
          <li><a routerLink="/search" routerLinkActive="active">ğŸ” Buscar</a></li>
        }

        @if (authStore.isColaborador()) {
          <li><a routerLink="/collaborator" routerLinkActive="active">ğŸ“‹ ColaboraciÃ³n</a></li>
          <li><a routerLink="/tasks" routerLinkActive="active">ğŸ“„ BitÃ¡coras</a></li>
        }

        <li><a routerLink="/About" routerLinkActive="active">â„¹ï¸ Acerca de</a></li>
        <li>
          <button class="logout-btn" (click)="onLogout()" [disabled]="isLoggingOut()">
            {{ isLoggingOut() ? 'â³ Cerrando...' : 'ğŸšª Cerrar SesiÃ³n' }}
          </button>
        </li>
      </ul>
    }
  </nav>

  <!-- Mobile menu button -->
  <button class="mobile-menu-btn" (click)="toggleMobileMenu()">â˜°</button>

  @if (isMobileMenuOpen()) {
    <div class="mobile-overlay" (click)="toggleMobileMenu()"></div>
    <nav class="mobile-nav">
      <ul class="nav-links">
        <li><a routerLink="/profile" (click)="toggleMobileMenu()">ğŸ‘¤ Perfil</a></li>

        @if (authStore.isAdmin()) {
          <li><a routerLink="/users" (click)="toggleMobileMenu()">ğŸ‘¥ Usuarios</a></li>
          <li><a routerLink="/create-user" (click)="toggleMobileMenu()">â• Crear Usuario</a></li>
          <li><a routerLink="/search-users" (click)="toggleMobileMenu()">ğŸ” Buscar Usuarios</a></li>
        }

        @if (authStore.isInvestigador()) {
          <li><a routerLink="/tasks" (click)="toggleMobileMenu()">ğŸ“‹ BitÃ¡coras</a></li>
          <li><a routerLink="/add-task" (click)="toggleMobileMenu()">â• Crear</a></li>
          <li><a routerLink="/search" (click)="toggleMobileMenu()">ğŸ” Buscar</a></li>
        }

        @if (authStore.isColaborador()) {
          <li><a routerLink="/collaborator" (click)="toggleMobileMenu()">ğŸ“‹ ColaboraciÃ³n</a></li>
          <li><a routerLink="/tasks" (click)="toggleMobileMenu()">ğŸ“„ BitÃ¡coras</a></li>
        }

        <li><a routerLink="/About" (click)="toggleMobileMenu()">â„¹ï¸ Acerca de</a></li>
        <li>
          <button class="logout-btn" (click)="onLogout()">ğŸšª Cerrar SesiÃ³n</button>
        </li>
      </ul>
    </nav>
  }
}
